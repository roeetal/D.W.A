{"version":3,"sources":["../src/ityped.js"],"names":["root","factory","define","amd","exports","module","init","destroy","ityped","global","forEach","a","b","c","d","e","length","f","g","h","j","call","async","selectedElement","props","cursor","document","createElement","classList","add","textContent","setProps","config","strings","typeSpeed","backSpeed","backDelay","startDelay","showCursor","loop","undefined","Promise","resolve","element","querySelector","then","properties","_props","initCursorOn","cursorChar","loopingOnWords","newCursor","cloneNode","insertAdjacentElement","word","index","arr","time","done","len","iterateWords","setTimeout","increment","reject","count","i","wordIndex","appendWord","charAt","innerHTML","wordsLengthArray","decrement","iterateInsideDecrement","iteratedI","substring","lengthWords","onFinished"],"mappings":"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","file":"ityped.js","sourcesContent":["/**\n * @name ityped\n * @description Dead simple Animated Typing with no dependencies\n * @author Luis Vinícius\n * @email luis@uilabs.me\n */;\n(function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof exports === \"object\") {\n    module.exports = {\n      init: factory.init,\n      destroy: factory.destroy\n    }\n  } else {\n    root.ityped = factory;\n  }\n}(this, function (global) {\n  /**\n   * async foreach\n   * https://www.npmjs.com/package/async-foreach\n   */\n    const forEach = function (a, b, c) {\n      var d = -1,\n        e = a.length >>> 0;\n      (function f(g) {\n        var h,\n          j = g === !1;\n        do\n          ++d;\n        while (!(d in a) && d !== e);\n        if (j || d === e) {\n          c && c(!j, a);\n          return\n        }\n        g = b.call({\n          async: function () {\n            return h = !0,\n            f\n          }\n        }, a[d], d, a),\n        h || f(g)\n      })();\n    };\n\n\n  /**\n   * el is the element\n   */\n  let selectedElement,\n    props,\n    /**\n    * creating the cursor\n    */\n    cursor = document.createElement('span');\n  \tcursor.classList.add('ityped-cursor');\n  \tcursor.textContent = '|';\n\n  /**\n   * @name setProps\n   * @description Set the ityped properties configuration\n   * @param {Object} config The configuration properties\n   * @return {Promise}\n   */\n  function setProps ( config ) {\n    let props = config;\n    props.strings    = config.strings    || ['Put your string here...', 'and Enjoy!']\n    props.typeSpeed  = config.typeSpeed  || 100;\n    props.backSpeed  = config.backSpeed  || 50;\n    props.backDelay  = config.backDelay  || 500;\n    props.startDelay = config.startDelay || 500;\n    props.showCursor = config.showCursor;\n    props.loop       = config.loop       || false;\n\n    if (props.showCursor === undefined) props.showCursor = true;\n\n    return Promise.resolve(props);\n  }\n  /**\n   * @name init\n   * @param { String || Element } element The element that will receive the strings\n   * @param {Object} config The initial configuration\n   */\n  function init(element, config) {\n    typeof element === 'string'\n      ? element = document.querySelector(element)\n      : element = element;\n    setProps(config).then(function(properties){\n      props = properties;\n      element._props = props;\n\t  // init cursor if needed\n\t  if (props.showCursor) {\n          initCursorOn(element, props.cursorChar || '|');\n\t  }\n      loopingOnWords(element);\n    })\n  }\n\n  function initCursorOn(element, cursorChar) {\n      const newCursor = cursor.cloneNode();\n\t  element.insertAdjacentElement('afterend', newCursor);\n      newCursor.textContent = cursorChar;\n  }\n\n  /**\n   * @name loopingOnWords\n   * @description Loop on each string passed\n   * @param {HTMLElement} \telement \tThe element to handle the animation on\n   * @param {Array} words The array that contain the words\n   */\n  function loopingOnWords(element) {\n    forEach(element._props.strings, function (word, index, arr) {\n      let time = (element._props.typeSpeed * word.length - 1);\n      /**\n       * set the correct time\n       * with the differences of type and back\n       * speed\n       */\n      if (element._props.backSpeed < element._props.typeSpeed) {\n        time -= (element._props.typeSpeed - element._props.backSpeed) * word.length;\n    } else if (element._props.backSpeed > element._props.typeSpeed) {\n        time += (element._props.backSpeed - element._props.typeSpeed) * word.length;\n      }\n      let done = this.async();\n      let len = element._props.strings.length;\n      iterateWords(element, word, index, len).then(function () {\n        setTimeout(function () {\n          done();\n        }, time)\n      })\n    }, function () {\n      if (element._props.loop) {\n        loopingOnWords(element);\n      }\n    });\n  }\n  /**\n   * @name increment\n   * @description Increment each letter and append it on element\n   * @param {Element} element The Element that will receive the letters\n   * @param {String} word The string that will be looped to\n   * get each letter\n   * @return {Promise}\n   */\n  function increment(element, word) {\n    return new Promise(function (resolve, reject) {\n        let count = 0;\n      for (let i = 0; i < word.length; i++) {\n        let wordIndex = i;\n        let len = word.length;\n        setTimeout(function (i) {\n          appendWord(element, word.charAt(wordIndex));\n          count++;\n          if (count === len - 1) {\n            resolve();\n          }\n        }, element._props.typeSpeed * i);\n      }\n    })\n  }\n  /**\n   * @name appendWord\n   * @description Append each letter on Element\n   * @param {Element} element The Element that will receive the letter\n   * @param {String} word The string that will be appended\n   */\n  function appendWord(element, word) {\n    element.innerHTML += word;\n  }\n\n  /**\n   * @name iterateWords\n   * @description Iterate on each word, incrementing and decrementing\n   * @param {Element} element The Element that will receive the letters of word\n   * @param {String} word The string that is the word\n   * @param {Integer} index The index position of the words Array\n   * @param {Integer} wordsLengthArray The length of words Array\n   * @return {Promise}\n   */\n  function iterateWords(element, word, index, wordsLengthArray) {\n    return new Promise(function (resolve, reject) {\n      increment(element, word)\n        .then(function () {\n          setTimeout(function () {\n            decrement(element, word, index, wordsLengthArray)\n              .then(function () {\n                setTimeout(function(){\n                  resolve();\n                }, element._props.startDelay)\n              });\n          }, element._props.backDelay)\n        });\n    });\n  }\n  /**\n   * @name iterateInsideDecrement\n   * @description Iterate on each word, inside the decrement function for decrement the word\n   * @param {Element} element The Element that will receive the letters of word\n   * @param {String} word The string that is the word\n   * @param {Integer} len The length of words Array\n   * @param {Promise} resolve The Promise.resolve method that will be trigerred when\n   * the decrement iteration are finished\n   * @return {Promise}\n   */\n  function iterateInsideDecrement(element, word, len, resolve) {\n    for (let i = len; i > 0; i--) {\n      let iteratedI = i, count = len;\n      setTimeout(function (i) {\n        element.innerHTML = word.substring(0, len - iteratedI)\n        count--;\n        if (iteratedI === 1) {\n          resolve();\n        }\n      }, element._props.backSpeed * i);\n    }\n  }\n\n  /**\n   * @name decrement\n   * @description decrement the word in the correct case\n   * @param {Element} element The Element that will receive the letters of word\n   * @param {String} word The string that is the word\n   * @param {Integer} index The index of the Array that contain the word\n   * @param {Integer} lengthWords The length of words Array\n   */\n  function decrement(element, word, index, lengthWords) {\n    return new Promise(function (resolve, reject) {\n      let len = word.length;\n      // if is the last letter and the last word and no loop\n      if (index + 1 === lengthWords) {\n        if (!element._props.loop) {\n        // when the last word\n          if (element._props.onFinished !== undefined && typeof element._props.onFinished === \"function\"){\n              element._props.onFinished();\n          }\n          element.innerHTML = word;\n        }\n        else if (element._props.loop) {\n          iterateInsideDecrement(element, word, len, resolve);\n        }\n      } else if (index + 1 !== lengthWords) {\n        iterateInsideDecrement(element, word, len, resolve);\n      }\n    })\n  }\n\n  /**\n   * @name destroy\n   * @description destroy the onFinished function\n   */\n  function destroy (element) {\n    element._props.onFinished = function(){return void 0};\n  }\n\n  /**\n   * Return the init function\n   */\n  return {init, destroy}\n}(this)));\n"]}